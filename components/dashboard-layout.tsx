"use client"

import type React from "react"

import { useState } from "react"
import { Button } from "@/components/ui/button"
import { Sheet, SheetContent, SheetTrigger } from "@/components/ui/sheet"
import { Badge } from "@/components/ui/badge"
import { BarChart3, Users, Activity, QrCode, Menu, Sun, Moon, Settings, Calendar, TrendingUp } from "lucide-react"
import { useTheme } from "next-themes"
import Link from "next/link"
import { usePathname } from "next/navigation"

interface DashboardLayoutProps {
  children: React.ReactNode
}

const navigation = [
  { name: "Genel Bakış", href: "/", icon: BarChart3 },
  { name: "Kullanıcı Yönetimi", href: "/users", icon: Users },
  { name: "Etkinlik Günlükleri", href: "/logs", icon: Calendar },
  { name: "QR Takibi", href: "/qr", icon: QrCode },
]

export function DashboardLayout({ children }: DashboardLayoutProps) {
  const [sidebarOpen, setSidebarOpen] = useState(false)
  const { theme, setTheme } = useTheme()
  const pathname = usePathname()

  const toggleTheme = () => {
    setTheme(theme === "dark" ? "light" : "dark")
  }
  const setSidebarOpenState = () => {
    console.log("Sidebar state changed:", !sidebarOpen)
    setSidebarOpen(!sidebarOpen)
  }

  const Sidebar = () => (
    <div className="flex h-full flex-col bg-card border-r">
      <div className="flex h-16 items-center px-6 border-b">
        <div className="flex items-center gap-2">
          {theme === "dark" ? (
            <div className="h-full">
       <svg width="135" height="42" data-logo="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 135 42">
        <g id="logogram" transform="translate(0, 1) rotate(0)" ><path d="M16.6584 40H15.3817C12.0653 40 10.07 39.9994 8.54581 39.7159L17.3668 28.0344L16.6584 40Z" fill="#C70000"></path><path d="M31.2482 39.7514C29.7502 39.9988 27.7875 40 24.6183 40H23.109L22.397 28.0309L31.2482 39.7514Z" fill="#C70000"></path><path d="M39.6715 31.6708C39.6071 31.9773 39.5313 32.2655 39.4389 32.5426C38.8337 34.3567 37.7712 35.9522 36.3867 37.1982L26.44 26.044L39.6715 31.6708Z" fill="#D60000"></path><path d="M3.48544 37.0792C2.16397 35.8511 1.14739 34.3 0.56108 32.5426C0.459551 32.2382 0.375253 31.921 0.307173 31.5803L13.3239 26.0458L3.48544 37.0792Z" fill="#D60000"></path><path d="M40 24.6183C40 25.7428 39.9968 26.7154 39.9858 27.5692L28.1729 23.006H40V24.6183Z" fill="#F50000"></path><path d="M11.5962 23.006L0.0106534 27.4805C0.000706106 26.6481 0 25.704 0 24.6183V23.006H11.5962Z" fill="#F50000"></path><path d="M24.6183 0C28.7807 0 30.862 0.000553673 32.5426 0.56108C35.7979 1.64713 38.3529 4.20208 39.4389 7.45739C39.9994 9.13798 40 11.2193 40 15.3817V20.016H27.5089L36.5181 16.1861L33.8459 14.4123L25.1048 17.7876L29.2081 12.358L26.2571 11.5501L21.7259 16.6282L21.3885 10.9091H18.3825L18.0398 16.6282L13.5121 11.5501L10.5629 12.358L14.6609 17.7859L5.92507 14.4123L3.25284 16.1861L12.2603 20.016H0V15.3817C0 11.2193 0.000553673 9.13798 0.56108 7.45739C1.64713 4.20208 4.20208 1.64713 7.45739 0.56108C9.13798 0.000553673 11.2193 0 15.3817 0H24.6183Z" fill="#FF0000"></path></g>
        <g id="logotype" transform="translate(45, 12.5)"><path fill="#ffffff" d="M9.49 17L6.20 17L6.20 0.20L10.38 0.20L13.86 7.62Q14.46 8.91 14.83 9.75Q15.20 10.59 15.40 11.14Q15.61 11.70 15.73 12.10L15.73 12.10Q15.85 11.70 16.04 11.14Q16.23 10.59 16.60 9.75Q16.98 8.91 17.58 7.62L17.58 7.62L21.08 0.20L25.11 0.20L25.11 17L21.82 17L21.82 10.21Q21.82 9.06 21.85 8.24Q21.87 7.42 21.92 6.74Q21.97 6.06 22.06 5.34L22.06 5.34L16.47 17L14.84 17L9.25 5.34Q9.34 6.06 9.39 6.74Q9.44 7.42 9.46 8.24Q9.49 9.06 9.49 10.21L9.49 10.21L9.49 17ZM33.37 17.31L33.37 17.31Q31.45 17.31 29.98 16.42Q28.52 15.54 27.72 14.06Q26.91 12.58 26.91 10.78L26.91 10.78Q26.91 8.98 27.75 7.48Q28.59 5.98 30.04 5.10Q31.50 4.21 33.37 4.21L33.37 4.21Q35.24 4.21 36.67 5.10Q38.10 5.98 38.90 7.48Q39.70 8.98 39.70 10.78L39.70 10.78Q39.70 11.05 39.68 11.34Q39.66 11.62 39.61 11.94L39.61 11.94L30.27 11.94Q30.54 13.04 31.34 13.74Q32.14 14.43 33.37 14.43L33.37 14.43Q34.42 14.43 35.20 13.95Q35.98 13.47 36.42 12.75L36.42 12.75L38.94 14.65Q38.19 15.82 36.70 16.57Q35.22 17.31 33.37 17.31ZM33.32 6.99L33.32 6.99Q32.17 6.99 31.35 7.69Q30.54 8.38 30.27 9.51L30.27 9.51L36.44 9.51Q36.18 8.48 35.35 7.74Q34.52 6.99 33.32 6.99ZM47.05 17.31L47.05 17.31Q45.13 17.31 43.66 16.42Q42.20 15.54 41.40 14.06Q40.59 12.58 40.59 10.78L40.59 10.78Q40.59 8.98 41.43 7.48Q42.27 5.98 43.72 5.10Q45.18 4.21 47.05 4.21L47.05 4.21Q48.92 4.21 50.35 5.10Q51.78 5.98 52.58 7.48Q53.38 8.98 53.38 10.78L53.38 10.78Q53.38 11.05 53.36 11.34Q53.34 11.62 53.29 11.94L53.29 11.94L43.95 11.94Q44.22 13.04 45.02 13.74Q45.82 14.43 47.05 14.43L47.05 14.43Q48.10 14.43 48.88 13.95Q49.66 13.47 50.10 12.75L50.10 12.75L52.62 14.65Q51.87 15.82 50.38 16.57Q48.90 17.31 47.05 17.31ZM47 6.99L47 6.99Q45.85 6.99 45.03 7.69Q44.22 8.38 43.95 9.51L43.95 9.51L50.12 9.51Q49.86 8.48 49.03 7.74Q48.20 6.99 47 6.99ZM60.73 17.31L60.73 17.31Q58.81 17.31 57.34 16.42Q55.88 15.54 55.08 14.06Q54.27 12.58 54.27 10.78L54.27 10.78Q54.27 8.98 55.11 7.48Q55.95 5.98 57.40 5.10Q58.86 4.21 60.73 4.21L60.73 4.21Q62.60 4.21 64.03 5.10Q65.46 5.98 66.26 7.48Q67.06 8.98 67.06 10.78L67.06 10.78Q67.06 11.05 67.04 11.34Q67.02 11.62 66.97 11.94L66.97 11.94L57.63 11.94Q57.90 13.04 58.70 13.74Q59.50 14.43 60.73 14.43L60.73 14.43Q61.78 14.43 62.56 13.95Q63.34 13.47 63.78 12.75L63.78 12.75L66.30 14.65Q65.55 15.82 64.06 16.57Q62.58 17.31 60.73 17.31ZM60.68 6.99L60.68 6.99Q59.53 6.99 58.71 7.69Q57.90 8.38 57.63 9.51L57.63 9.51L63.80 9.51Q63.54 8.48 62.71 7.74Q61.88 6.99 60.68 6.99ZM74.62 17L72.85 17Q71 17 70.02 16.09Q69.03 15.18 69.03 13.14L69.03 13.14L69.03 7.28L67.28 7.28L67.28 4.52L69.03 4.52L69.03 2L72.27 1.66L72.27 4.52L74.91 4.52L74.91 7.28L72.27 7.28L72.27 12.97Q72.27 14.12 73.28 14.12L73.28 14.12L74.62 14.12L74.62 17ZM81.94 17.31L81.94 17.31Q80.02 17.31 78.51 16.42Q77 15.54 76.15 14.06Q75.30 12.58 75.30 10.78L75.30 10.78Q75.30 8.98 76.15 7.50Q77 6.01 78.51 5.12Q80.02 4.23 81.94 4.23L81.94 4.23Q83.89 4.23 85.39 5.12Q86.89 6.01 87.74 7.50Q88.59 8.98 88.59 10.78L88.59 10.78Q88.59 12.58 87.74 14.06Q86.89 15.54 85.39 16.42Q83.89 17.31 81.94 17.31ZM81.94 14.36L81.94 14.36Q82.98 14.36 83.74 13.87Q84.51 13.38 84.93 12.56Q85.35 11.74 85.35 10.78L85.35 10.78Q85.35 9.80 84.93 8.98Q84.51 8.17 83.74 7.68Q82.98 7.18 81.94 7.18L81.94 7.18Q80.91 7.18 80.14 7.68Q79.38 8.17 78.96 8.98Q78.54 9.80 78.54 10.78L78.54 10.78Q78.54 11.74 78.96 12.56Q79.38 13.38 80.14 13.87Q80.91 14.36 81.94 14.36Z"></path></g>
        
      </svg>
            </div>
          ) : (
            <svg width="135" height="42" viewBox="0 0 135 42" xmlns="http://www.w3.org/2000/svg" data-logo="logo">
        <g transform="translate(0, 1) rotate(0)" id="logogram"><path fill="#C70000" d="M16.6584 40H15.3817C12.0653 40 10.07 39.9994 8.54581 39.7159L17.3668 28.0344L16.6584 40Z"></path><path fill="#C70000" d="M31.2482 39.7514C29.7502 39.9988 27.7875 40 24.6183 40H23.109L22.397 28.0309L31.2482 39.7514Z"></path><path fill="#D60000" d="M39.6715 31.6708C39.6071 31.9773 39.5313 32.2655 39.4389 32.5426C38.8337 34.3567 37.7712 35.9522 36.3867 37.1982L26.44 26.044L39.6715 31.6708Z"></path><path fill="#D60000" d="M3.48544 37.0792C2.16397 35.8511 1.14739 34.3 0.56108 32.5426C0.459551 32.2382 0.375253 31.921 0.307173 31.5803L13.3239 26.0458L3.48544 37.0792Z"></path><path fill="#F50000" d="M40 24.6183C40 25.7428 39.9968 26.7154 39.9858 27.5692L28.1729 23.006H40V24.6183Z"></path><path fill="#F50000" d="M11.5962 23.006L0.0106534 27.4805C0.000706106 26.6481 0 25.704 0 24.6183V23.006H11.5962Z"></path><path fill="#FF0000" d="M24.6183 0C28.7807 0 30.862 0.000553673 32.5426 0.56108C35.7979 1.64713 38.3529 4.20208 39.4389 7.45739C39.9994 9.13798 40 11.2193 40 15.3817V20.016H27.5089L36.5181 16.1861L33.8459 14.4123L25.1048 17.7876L29.2081 12.358L26.2571 11.5501L21.7259 16.6282L21.3885 10.9091H18.3825L18.0398 16.6282L13.5121 11.5501L10.5629 12.358L14.6609 17.7859L5.92507 14.4123L3.25284 16.1861L12.2603 20.016H0V15.3817C0 11.2193 0.000553673 9.13798 0.56108 7.45739C1.64713 4.20208 4.20208 1.64713 7.45739 0.56108C9.13798 0.000553673 11.2193 0 15.3817 0H24.6183Z"></path></g>
        <g transform="translate(45, 12.5)" id="logotype"><path d="M9.49 17L6.20 17L6.20 0.20L10.38 0.20L13.86 7.62Q14.46 8.91 14.83 9.75Q15.20 10.59 15.40 11.14Q15.61 11.70 15.73 12.10L15.73 12.10Q15.85 11.70 16.04 11.14Q16.23 10.59 16.60 9.75Q16.98 8.91 17.58 7.62L17.58 7.62L21.08 0.20L25.11 0.20L25.11 17L21.82 17L21.82 10.21Q21.82 9.06 21.85 8.24Q21.87 7.42 21.92 6.74Q21.97 6.06 22.06 5.34L22.06 5.34L16.47 17L14.84 17L9.25 5.34Q9.34 6.06 9.39 6.74Q9.44 7.42 9.46 8.24Q9.49 9.06 9.49 10.21L9.49 10.21L9.49 17ZM33.37 17.31L33.37 17.31Q31.45 17.31 29.98 16.42Q28.52 15.54 27.72 14.06Q26.91 12.58 26.91 10.78L26.91 10.78Q26.91 8.98 27.75 7.48Q28.59 5.98 30.04 5.10Q31.50 4.21 33.37 4.21L33.37 4.21Q35.24 4.21 36.67 5.10Q38.10 5.98 38.90 7.48Q39.70 8.98 39.70 10.78L39.70 10.78Q39.70 11.05 39.68 11.34Q39.66 11.62 39.61 11.94L39.61 11.94L30.27 11.94Q30.54 13.04 31.34 13.74Q32.14 14.43 33.37 14.43L33.37 14.43Q34.42 14.43 35.20 13.95Q35.98 13.47 36.42 12.75L36.42 12.75L38.94 14.65Q38.19 15.82 36.70 16.57Q35.22 17.31 33.37 17.31ZM33.32 6.99L33.32 6.99Q32.17 6.99 31.35 7.69Q30.54 8.38 30.27 9.51L30.27 9.51L36.44 9.51Q36.18 8.48 35.35 7.74Q34.52 6.99 33.32 6.99ZM47.05 17.31L47.05 17.31Q45.13 17.31 43.66 16.42Q42.20 15.54 41.40 14.06Q40.59 12.58 40.59 10.78L40.59 10.78Q40.59 8.98 41.43 7.48Q42.27 5.98 43.72 5.10Q45.18 4.21 47.05 4.21L47.05 4.21Q48.92 4.21 50.35 5.10Q51.78 5.98 52.58 7.48Q53.38 8.98 53.38 10.78L53.38 10.78Q53.38 11.05 53.36 11.34Q53.34 11.62 53.29 11.94L53.29 11.94L43.95 11.94Q44.22 13.04 45.02 13.74Q45.82 14.43 47.05 14.43L47.05 14.43Q48.10 14.43 48.88 13.95Q49.66 13.47 50.10 12.75L50.10 12.75L52.62 14.65Q51.87 15.82 50.38 16.57Q48.90 17.31 47.05 17.31ZM47 6.99L47 6.99Q45.85 6.99 45.03 7.69Q44.22 8.38 43.95 9.51L43.95 9.51L50.12 9.51Q49.86 8.48 49.03 7.74Q48.20 6.99 47 6.99ZM60.73 17.31L60.73 17.31Q58.81 17.31 57.34 16.42Q55.88 15.54 55.08 14.06Q54.27 12.58 54.27 10.78L54.27 10.78Q54.27 8.98 55.11 7.48Q55.95 5.98 57.40 5.10Q58.86 4.21 60.73 4.21L60.73 4.21Q62.60 4.21 64.03 5.10Q65.46 5.98 66.26 7.48Q67.06 8.98 67.06 10.78L67.06 10.78Q67.06 11.05 67.04 11.34Q67.02 11.62 66.97 11.94L66.97 11.94L57.63 11.94Q57.90 13.04 58.70 13.74Q59.50 14.43 60.73 14.43L60.73 14.43Q61.78 14.43 62.56 13.95Q63.34 13.47 63.78 12.75L63.78 12.75L66.30 14.65Q65.55 15.82 64.06 16.57Q62.58 17.31 60.73 17.31ZM60.68 6.99L60.68 6.99Q59.53 6.99 58.71 7.69Q57.90 8.38 57.63 9.51L57.63 9.51L63.80 9.51Q63.54 8.48 62.71 7.74Q61.88 6.99 60.68 6.99ZM74.62 17L72.85 17Q71 17 70.02 16.09Q69.03 15.18 69.03 13.14L69.03 13.14L69.03 7.28L67.28 7.28L67.28 4.52L69.03 4.52L69.03 2L72.27 1.66L72.27 4.52L74.91 4.52L74.91 7.28L72.27 7.28L72.27 12.97Q72.27 14.12 73.28 14.12L73.28 14.12L74.62 14.12L74.62 17ZM81.94 17.31L81.94 17.31Q80.02 17.31 78.51 16.42Q77 15.54 76.15 14.06Q75.30 12.58 75.30 10.78L75.30 10.78Q75.30 8.98 76.15 7.50Q77 6.01 78.51 5.12Q80.02 4.23 81.94 4.23L81.94 4.23Q83.89 4.23 85.39 5.12Q86.89 6.01 87.74 7.50Q88.59 8.98 88.59 10.78L88.59 10.78Q88.59 12.58 87.74 14.06Q86.89 15.54 85.39 16.42Q83.89 17.31 81.94 17.31ZM81.94 14.36L81.94 14.36Q82.98 14.36 83.74 13.87Q84.51 13.38 84.93 12.56Q85.35 11.74 85.35 10.78L85.35 10.78Q85.35 9.80 84.93 8.98Q84.51 8.17 83.74 7.68Q82.98 7.18 81.94 7.18L81.94 7.18Q80.91 7.18 80.14 7.68Q79.38 8.17 78.96 8.98Q78.54 9.80 78.54 10.78L78.54 10.78Q78.54 11.74 78.96 12.56Q79.38 13.38 80.14 13.87Q80.91 14.36 81.94 14.36Z" fill="#000000"></path></g>
        
      </svg>
          )}
        </div>
      </div>
      <nav className="flex-1 space-y-1 px-4 py-4">
        {navigation.map((item) => {
          const isActive = pathname === item.href
          return (
            <Button
              key={item.name}
              variant={isActive ? "secondary" : "ghost"}
              className="w-full justify-start gap-3"
              asChild
            >
              <Link href={item.href}>
                <item.icon className="h-4 w-4" />
                {item.name}
              </Link>
            </Button>
          )
        })}
      </nav>
      <div className="p-4 border-t">
        <Button variant="ghost" className="w-full justify-start gap-3">
          <Settings className="h-4 w-4" />
          Ayarlar
        </Button>
      </div>
    </div>
  )

  return (
    <div className="h-screen flex bg-background">
      {/* Desktop Sidebar */}
      <div className="hidden lg:flex lg:w-64 lg:flex-col">
        <Sidebar />
      </div>

      {/* Mobile Sidebar */}
      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpenState}>
        <SheetContent side="left" className="p-0 w-64">
          <Sidebar />
        </SheetContent>
      </Sheet>

      {/* Main Content */}
      <div className="flex-1 flex flex-col overflow-hidden">
        {/* Header */}
        <header className="fixed top-0 right-0 left-0 lg:left-64 h-16 border-b flex items-center justify-between px-6 z-50">
  <div className="flex  items-center gap-4">
    <Button 
      variant="ghost" 
      size="icon" 
      className="lg:hidden"
      onClick={setSidebarOpenState}
    >
      <Menu className="h-5 w-5" />
    </Button>
    <div>
      <h1 className="text-lg font-semibold">Konferans Analitikleri</h1>
    </div>
  </div>
  <div className="flex items-center gap-4">
    <Badge variant="secondary" className="gap-1">
      <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse" />
      Canlı
    </Badge>
    <Button variant="ghost" size="icon" onClick={toggleTheme}>
      <Sun className="h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0" />
      <Moon className="absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100" />
    </Button>
  </div>
</header>

        {/* Main Content Area */}
        <main className="flex-1 overflow-auto p-6 pb-12 mt-16">{children}</main>
      </div>
    </div>
  )
}
